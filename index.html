<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    <meta name="description" content="SubmetNEV - NEV/USP. Diretrizes oficiais para submissão em periódicos de Ciências Sociais.">
    <title>NEV/USP · SubmetNEV - Normas para Publicação Acadêmica</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="imagem/icone_submetnev.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
    /* ESTILOS EXISTENTES - mantenha tudo que já estava aqui */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc;
        color: #1e293b;
        line-height: 1.6;
    }

    header {
        border-bottom: 3px solid #003366;
        background-color: rgba(255, 255, 255, 0.98);
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    }

    .revista-card {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    }
    .revista-card:hover {
        border-color: #003366;
        box-shadow: 0 8px 16px rgba(0, 51, 102, 0.08);
        transform: translateY(-2px);
    }

    /* NOVO: Container para imagem quadrada perfeita */
    .card-image-container {
        width: 100%;
        padding-top: 100%; /* 1:1 Aspect Ratio */
        position: relative;
        overflow: hidden;
        background-color: #f1f5f9;
    }

    .card-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
    }

    .filter-btn {
        transition: all 0.2s;
        border: 1px solid #e2e8f0;
        background: white;
        color: #64748b;
        font-weight: 500;
        border-radius: 30px;
        padding: 0.4rem 1rem;
        font-size: 0.875rem;
    }
    .filter-btn.active {
        background: #003366;
        color: white;
        border-color: #003366;
    }

    .tab {
        padding: 0.75rem 1.5rem;
        font-weight: 500;
        border-bottom: 3px solid transparent;
        cursor: pointer;
        transition: all 0.2s;
    }
    .tab.active {
        border-bottom-color: #003366;
        color: #003366;
        font-weight: 600;
    }

    .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 12px 20px;
        background: #1e293b;
        color: white;
        border-radius: 8px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 9999;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s;
    }
    .toast.show { transform: translateY(0); opacity: 1; }
    .toast.success { border-left: 4px solid #10b981; }
    .toast.error { border-left: 4px solid #ef4444; }
    .toast.warning { border-left: 4px solid #f59e0b; }
    .toast.info { border-left: 4px solid #3b82f6; }

    .modal-overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
    }
    .modal-overlay.show { opacity: 1; visibility: visible; }
    .modal-content {
        background: white;
        border-radius: 12px;
        max-width: 90%;
        width: 600px;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px -12px black;
    }

    .admin-panel {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        padding: 1.5rem;
    }
    .admin-panel input, .admin-panel textarea, .admin-panel select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        font-size: 0.875rem;
    }
    .admin-panel label {
        font-weight: 600;
        font-size: 0.875rem;
        color: #334155;
    }

    /* Utilitários */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Cabeçalho -->
        <header class="sticky top-0 z-50 py-2 px-4">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <!-- Logo / Home -->
                <button onclick="window.goToHome()" class="flex items-center gap-3 hover:opacity-80 transition">
                    <img src="imagem/logo_submetnev.png" alt="NEV/USP" class="h-16 md:h-24 w-auto object-contain"
                         onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0MCA4MCIgZmlsbD0iIzFkNGVkOCI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSI4MCIgcng9IjgiIGZpbGw9IiMxZTQwYWYiLz48dGV4dCB4PSIyMCIgeT0iNDgiIGZvbnQtZmFtaWx5PSJJbnRlciwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPk5FVjwvdGV4dD48L3N2Zz4=';">
                    <div class="hidden md:block border-l border-slate-200 pl-3">
                        <p class="text-xs text-[#003366] font-semibold uppercase">Apoio ao autor</p>
                        <p class="text-xs text-slate-500">NEV/USP · Universidade de São Paulo</p>
                    </div>
                </button>

                <!-- Botões de navegação -->
                <div class="flex gap-2">
                    <button onclick="window.showGeneralNorms()" 
                        class="bg-blue-50 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 border border-blue-200 transition">
                        <i class="fas fa-info-circle"></i> Normas Gerais
                    </button>
                    <button onclick="window.showGuideView()" 
                        class="bg-amber-50 hover:bg-amber-100 text-amber-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 border border-amber-200 transition">
                        <i class="fas fa-compass"></i> Guias de Redação
                    </button>
                    <button onclick="window.openAdminModal()" 
                        class="bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 border border-slate-300 transition">
                        <i class="fas fa-lock"></i> Área Restrita
                    </button>
                </div>
            </div>
        </header>

        <!-- Conteúdo principal -->
        <main class="flex-1 max-w-7xl w-full mx-auto px-4 py-8">
            <!-- VIEW PRINCIPAL (lista de revistas) -->
            <div id="main-view">
                <!-- Barra de busca e filtros -->
                <div class="bg-white rounded-xl border border-slate-200 p-6 mb-8 shadow-sm">
                    <div class="relative mb-5">
                        <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input type="text" id="search-input" placeholder="Buscar revista por nome, instituição ou foco..." 
                               class="w-full pl-12 pr-12 py-3 border border-slate-200 rounded-lg focus:border-[#003366] focus:ring-1 focus:ring-[#003366] outline-none">
                        <button id="clear-search" class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-700 hidden">
                            <i class="fas fa-times-circle"></i>
                        </button>
                    </div>

                    <div class="flex flex-wrap items-center gap-3">
                        <span class="text-sm font-semibold text-slate-600"><i class="fas fa-filter text-[#003366] mr-1"></i>Qualis:</span>
                        <div id="qualis-filters" class="flex flex-wrap gap-2"></div>
                    </div>
                </div>

                <!-- Contador de resultados -->
                <div class="mb-5 flex justify-between items-center">
                    <h2 id="results-count" class="text-slate-600 text-sm flex items-center gap-2">
                        <i class="fas fa-spinner animate-spin text-[#003366]"></i> Carregando...
                    </h2>
                </div>

                <!-- Grid de revistas -->
                <div id="revistas-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12"></div>
            </div>

            <!-- VIEW DETALHE DA REVISTA -->
            <div id="detail-view" class="hidden">
                <div id="revista-detail-content"></div>
            </div>

            <!-- VIEW NORMAS GERAIS -->
            <div id="general-norms-view" class="hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
                    <h2 class="text-2xl font-bold text-[#003366] flex items-center gap-2">
                        <i class="fas fa-scale-balanced"></i> Normas Gerais de Publicação
                    </h2>
                    <button onclick="window.hideGeneralNorms()" class="text-slate-600 hover:text-slate-900 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </button>
                </div>
                <div id="general-norms-content" class="grid grid-cols-1 md:grid-cols-2 gap-7"></div>
            </div>

            <!-- VIEW GUIAS DE REDAÇÃO -->
            <div id="guide-view" class="hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
                    <h2 class="text-2xl font-bold text-[#003366] flex items-center gap-2">
                        <i class="fas fa-compass"></i> Guias de Redação Acadêmica
                    </h2>
                    <button onclick="window.hideGuideView()" class="text-slate-600 hover:text-slate-900 flex items-center gap-1">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </button>
                </div>
                <div id="guide-content" class="space-y-8"></div>
            </div>
        </main>

        <!-- Rodapé -->
        <footer class="border-t border-slate-200 bg-white py-6 px-4 text-center">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-center gap-3 mb-2">
                    <img src="imagem/icone_submetnev.png" alt="SubmetNEV" class="h-5 w-auto opacity-60">
                    <p class="text-slate-500 text-xs font-medium uppercase tracking-wider">
                        © 2026 · Núcleo de Estudos da Violência · Universidade de São Paulo
                    </p>
                </div>
                <p class="text-slate-400 text-[11px] max-w-2xl mx-auto">
                    As normas estão sujeitas a alterações. Consulte sempre o site oficial da revista.<br>
                    <button onclick="window.openTermsModal()" class="text-[#003366] hover:underline mt-2 inline-flex items-center gap-1">
                        <i class="fas fa-file-contract"></i> Termos de Uso e Privacidade
                    </button>
                </p>
            </div>
        </footer>
    </div>

   <!-- MODAL DE TERMOS (COMPLETO) -->
<div id="terms-modal" class="modal-overlay">
    <div class="modal-content p-8" role="dialog" aria-modal="true">
        <div class="flex justify-between items-center mb-6 border-b pb-4">
            <h3 class="text-xl font-bold text-[#003366] flex items-center gap-2">
                <i class="fas fa-gavel"></i> Termos de Uso e Compromisso do Pesquisador
            </h3>
            <button onclick="window.closeTermsModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
        </div>
        <div class="space-y-5 text-slate-600 text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2">
            <div class="bg-slate-50 p-4 rounded-lg border-l-4 border-[#003366]">
                <p><strong class="text-[#003366]">1. Finalidade Acadêmica e Institucional:</strong> O SubmetNEV é uma ferramenta desenvolvida pelo Núcleo de Estudos da Violência da Universidade de São Paulo (NEV/USP) com o objetivo de apoiar a comunidade científica no processo de submissão de artigos. As informações disponibilizadas são consolidadas a partir de diretrizes públicas e fontes oficiais dos periódicos, não substituindo a consulta direta aos sites oficiais.</p>
            </div>
            
            <div>
                <p><strong class="text-[#003366]">2. Responsabilidade do Usuário e Verificação Oficial:</strong> O pesquisador é integralmente responsável pela conferência e validação das normas de submissão no website oficial do periódico antes da submissão final. O NEV/USP não se responsabiliza por eventuais discrepâncias, atualizações, erros de digitação, ou decisões editoriais dos periódicos indexados. O usuário assume total responsabilidade pelo uso das informações aqui disponibilizadas.</p>
            </div>
            
            <div>
                <p><strong class="text-[#003366]">3. Propriedade Intelectual e Atribuição:</strong> O design, código-fonte, estrutura e conteúdo original do SubmetNEV são de propriedade exclusiva do NEV/USP, protegidos por legislação de direitos autorais (Lei 9.610/98). É vedada a reprodução não autorizada, distribuição, modificação ou uso comercial sem consentimento expresso por escrito da instituição. É permitida a citação, desde que atribuída a fonte: "SubmetNEV - Núcleo de Estudos da Violência da Universidade de São Paulo".</p>
            </div>

            <div>
                <p><strong class="text-[#003366]">4. Privacidade e Dados de Navegação (LGPD):</strong> Este sistema não coleta dados pessoais sem consentimento explícito. Informações de navegação (cookies, endereço IP, páginas acessadas) são utilizadas exclusivamente para melhoria da experiência do usuário, análises estatísticas internas e segurança, em conformidade com a Lei Geral de Proteção de Dados (Lei 13.709/18). O usuário pode solicitar a qualquer momento a exclusão de eventuais dados armazenados entrando em contato com a administração do sistema.</p>
            </div>

            <div>
                <p><strong class="text-[#003366]">5. Limitação de Responsabilidade:</strong> O NEV/USP não se responsabiliza por danos diretos, indiretos, incidentais ou consequenciais decorrentes do uso ou da impossibilidade de uso do sistema, incluindo, mas não se limitando a, atrasos na submissão, rejeição de artigos por inadequação às normas, ou perda de dados. O sistema é fornecido "no estado em que se encontra", sem garantias de disponibilidade contínua ou ausência de erros.</p>
            </div>

            <div>
                <p><strong class="text-[#003366]">6. Direitos dos Titulares (LGPD):</strong> Nos termos da LGPD, o usuário tem direito a:
                    <ul class="list-disc pl-6 mt-2 space-y-1">
                        <li>Confirmação da existência de tratamento de dados;</li>
                        <li>Acesso aos dados;</li>
                        <li>Correção de dados incompletos, inexatos ou desatualizados;</li>
                        <li>Anonimização, bloqueio ou eliminação de dados desnecessários;</li>
                        <li>Portabilidade dos dados a outro fornecedor de serviço;</li>
                        <li>Eliminação dos dados tratados com consentimento;</li>
                        <li>Informação sobre compartilhamento de dados;</li>
                        <li>Revogação do consentimento.</li>
                    </ul>
                </p>
            </div>

            <div>
                <p><strong class="text-[#003366]">7. Alterações nos Termos:</strong> O NEV/USP reserva-se o direito de modificar estes termos a qualquer momento, sendo as alterações publicadas nesta mesma página. O uso continuado do sistema após tais alterações constitui aceitação dos novos termos. Recomenda-se a revisão periódica desta seção.</p>
            </div>

            <div>
                <p><strong class="text-[#003366]">8. Foro e Legislação Aplicável:</strong> Fica eleito o Foro da Justiça Federal, Seção Judiciária de São Paulo, Subseção de São Paulo, com exclusão de qualquer outro, por mais privilegiado que seja, para dirimir quaisquer controvérsias decorrentes destes termos, aplicando-se a legislação brasileira.</p>
            </div>

            <div class="bg-amber-50 p-4 rounded-lg border border-amber-200 mt-4">
                <p class="text-xs text-amber-800"><i class="fas fa-info-circle mr-1"></i> Ao utilizar o SubmetNEV, o pesquisador declara ter lido, compreendido e concordado integralmente com estes Termos de Uso e com a Política de Privacidade aqui descrita.</p>
            </div>
        </div>
        <div class="mt-8 flex justify-end gap-3">
            <button onclick="window.closeTermsModal()" class="border border-slate-300 text-slate-700 px-6 py-2 rounded-md font-medium hover:bg-slate-50 transition-colors">
                Fechar
            </button>
            <button onclick="window.closeTermsModal()" class="bg-[#003366] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-900 transition-colors shadow-sm">
                Estou Ciente e Concordo
            </button>
        </div>
    </div>
</div>

    <!-- MODAL ADMIN (ÁREA RESTRITA) -->
    <div id="admin-modal" class="modal-overlay">
        <div class="modal-content p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-[#003366]">Área Restrita</h3>
                <button onclick="window.closeAdminModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
            </div>
            <div id="admin-login" class="space-y-4">
                <p class="text-sm text-slate-600">Digite a senha para acessar o painel de edição.</p>
                <input type="password" id="admin-password" placeholder="Senha" class="w-full p-2 border rounded-lg">
                <button onclick="window.adminLogin()" class="bg-[#003366] text-white px-4 py-2 rounded-lg w-full">Entrar</button>
            </div>
            <div id="admin-panel" class="hidden space-y-4">
                <p class="text-sm text-green-600">Login efetuado com sucesso.</p>
                <div class="flex gap-2">
                    <button onclick="window.exportJSON()" class="bg-green-600 text-white px-3 py-1 rounded text-sm"><i class="fas fa-download"></i> Exportar JSON</button>
                    <button onclick="window.resetToOriginal()" class="bg-red-600 text-white px-3 py-1 rounded text-sm"><i class="fas fa-undo"></i> Restaurar original</button>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Revistas</h4>
                    <select id="admin-revista-select" class="w-full p-2 border rounded-lg mb-2">
                        <option value="">-- Selecione uma revista para editar --</option>
                    </select>
                    <button onclick="window.addNewRevista()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm"><i class="fas fa-plus"></i> Nova Revista</button>
                </div>
                <div id="admin-editor" class="hidden space-y-3 border-t pt-4">
                    <!-- Campos serão preenchidos dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST CONTAINER -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 flex flex-col gap-3"></div>

    <!-- Script principal -->
    <script src="script.js"></script>
    <script>
        // Funções globais para modais
        window.openTermsModal = () => document.getElementById('terms-modal').classList.add('show');
        window.closeTermsModal = () => document.getElementById('terms-modal').classList.remove('show');
        window.openAdminModal = () => document.getElementById('admin-modal').classList.add('show');
        window.closeAdminModal = () => {
            document.getElementById('admin-modal').classList.remove('show');
            document.getElementById('admin-login').classList.remove('hidden');
            document.getElementById('admin-panel').classList.add('hidden');
        };
        // Fechar modal ao clicar fora
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                window.closeTermsModal();
                window.closeAdminModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                window.closeTermsModal();
                window.closeAdminModal();
            }
        });
    </script>
</body>
</html>